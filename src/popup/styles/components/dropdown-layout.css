/**
 * DropdownLayout Component Styles
 * 下拉布局组件样式
 * 
 * 职责：
 * - 定义布局规则，利用浏览器原生布局能力
 * - 使用 CSS 变量计算高度，避免 JS 硬编码
 * - 优化滚动性能（布局边界、合成层）
 */

/* 容器：Flex 布局，主轴为垂直方向 */
.tag-input-dropdown-container {
  display: flex;
  flex-direction: column;
  /* 关键修改：移除容器的 max-height 计算，让内容撑开容器 */
  width: 100%;
  box-sizing: border-box;
  padding: var(--space-1); /* 稍微减小容器 padding，交给 item 处理，视觉更紧凑 */
}

/* 滚动区域：限制高度的核心区域 */
.tag-input-dropdown-scrollable {
  flex: 1 1 auto;
  overflow-y: auto;
  overflow-x: hidden;
  
  /* 关键架构变更：在这里控制最大可见行数 */
  /* 假设行高 --control-height-sm (约32px) 或 --dropdown-row-height */
  /* var(--visible-rows) 由 React 传入，默认为 3 */
  max-height: calc(var(--visible-rows, 3) * var(--control-height-sm));

  /* 性能优化：创建独立的渲染层，避免滚动时引起整个 Dropdown 重绘 */
  contain: layout style paint;
  overscroll-behavior: contain; /* 阻止滚动链传递给父级 */
  
  /* 隐藏滚动条但保留功能 */
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.tag-input-dropdown-scrollable::-webkit-scrollbar {
  display: none;
}

/* 固定底部：Footer */
.tag-input-dropdown-fixed {
  flex-shrink: 0; /* 严禁压缩 */
  /* 视觉分割线，移除了 background blur，因为在 GlassCard 内部不需要二次模糊 */
  border-top: 1px solid var(--border-glass-subtle);
  margin-top: var(--space-1);
  padding-top: var(--space-1);
  position: relative;
  z-index: var(--z-content); /* 确保 Footer 在滚动内容之上 */
}

/* Separator：使用 border 替代独立组件，性能更好 */
.tag-input-dropdown-separator {
  height: 1px;
  background: var(--border-glass-subtle);
  margin: var(--space-2) 0;
}

