/* ========================================
   LAYER 2: BASE STYLES
   Global Reset, Scrollbar, HTML Tags
   ======================================== */

@layer base {
  /* Base typography. This is not applied to elements which have an ancestor with a Tailwind text class. */
  :where(:not(:has([class*=" text-"]), :not(:has([class^="text-"])))) {
    :is(h1, h2, h3, h4) {
      font-weight: 500;
      line-height: 1.5;
      color: var(--color-text-primary);
    }
    
    /* ... (Keeping sizes but ensuring colors are tokenized) ... */
    
    :is(p, label, button, input) {
      color: var(--color-text-primary);
    }
  }
}

html {
  font-size: var(--font-size);
  scroll-behavior: smooth;
  overflow-y: scroll;
}

body {
  font-size: 20px;
  background: var(--c-bg);
  color: var(--c-content);
  transition: none; /* Initial state */
}

/* 性能优化: 仅在主题加载完成后启用过渡，避免 FOUC 和 Layout Thrashing */
body[data-theme-ready] {
  transition: background var(--transition-slow) var(--ease-glass), 
              color var(--transition-slow) var(--ease-glass);
}

body[data-theme-no-transition] {
  transition: none !important;
}

/* ========================================
   SCROLLBAR SYSTEM: "Ghost Pill"
   ======================================== */

/* --- Webkit (Chrome, Edge, Safari) --- */
::-webkit-scrollbar {
  width: var(--sb-width);
  height: var(--sb-width);
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--sb-thumb-idle);
  border-radius: var(--radius-full);
  border: 3px solid transparent;
  background-clip: content-box;
  transition: background-color var(--transition-base);
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--sb-thumb-hover);
}

::-webkit-scrollbar-thumb:active {
  background-color: var(--sb-thumb-active);
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* --- Firefox (Standard CSS) --- */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--sb-thumb-idle) transparent;
}

/* Selection color */
::selection {
  background-color: var(--bg-action-moderate);
  color: var(--c-content);
}

/* Optimization: 提示浏览器开启硬件加速 */
[class*="backdrop-blur"],
.liquidGlass-effect {
  transform: translateZ(0);
  -webkit-font-smoothing: antialiased;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

