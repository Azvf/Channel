/* ========================================
   LAYER 2: BASE STYLES
   Global Reset, Scrollbar, HTML Tags
   ======================================== */

@layer base {
  /* Base typography. This is not applied to elements which have an ancestor with a Tailwind text class. */
  :where(:not(:has([class*=" text-"]), :not(:has([class^="text-"])))) {
    :is(h1) {
      font-size: var(--text-2xl);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    :is(h2) {
      font-size: var(--text-xl);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    :is(h3) {
      font-size: var(--text-lg);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    :is(h4) {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    :is(p) {
      font-size: var(--text-base);
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }

    :is(label) {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    :is(button) {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    :is(input) {
      font-size: var(--text-base);
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }
  }
}

html {
  font-size: var(--font-size);
  scroll-behavior: smooth;
  overflow-y: scroll;
}

body {
  font-size: 20px;
  background: var(--c-bg);
  color: var(--c-content);
  transition: none; /* Initial state */
}

/* 性能优化: 仅在主题加载完成后启用过渡，避免 FOUC 和 Layout Thrashing */
body[data-theme-ready] {
  transition: background var(--transition-slow) var(--ease-glass), 
              color var(--transition-slow) var(--ease-glass);
}

body[data-theme-no-transition] {
  transition: none !important;
}

/* ========================================
   SCROLLBAR SYSTEM: "Ghost Pill"
   ======================================== */

/* --- Webkit (Chrome, Edge, Safari) --- */
::-webkit-scrollbar {
  width: var(--sb-width);
  height: var(--sb-width);
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--sb-thumb-idle);
  border-radius: 99em;
  border: 3px solid transparent;
  background-clip: content-box;
  transition: background-color var(--transition-base);
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--sb-thumb-hover);
}

::-webkit-scrollbar-thumb:active {
  background-color: var(--sb-thumb-active);
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* --- Firefox (Standard CSS) --- */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--sb-thumb-idle) transparent;
}

/* Selection color */
::selection {
  background-color: color-mix(in srgb, var(--c-action) 30%, transparent);
  color: var(--c-content);
}

/* Optimization: 提示浏览器开启硬件加速 */
[class*="backdrop-blur"],
.liquidGlass-effect {
  transform: translateZ(0);
  -webkit-font-smoothing: antialiased;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

